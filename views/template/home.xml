<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="home_template" name="Home Page">
        <!-- Load default frontend assets -->
        <t t-call-assets="web.assets_frontend"/>

        <!-- Link custom CSS -->
        <link rel="stylesheet" type="text/css" href="/auction_management/static/src/css/auction.css"/>

        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-light1">
            <a class="navbar-brand" href="/">Auction System</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/auction/register">Register</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/auction/login">Login</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/auction/logout">Logout</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="/auction/list">Auctions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/properties">Properties</a>
                    </li>
                </ul>
                <div class="d-flex">
                    <input type="text" name="query" placeholder="Search for Auction" class="form-control me-2"/>
                    <button type="submit" class="btn btn-outline-dark btn-lg">Search</button>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <header>
            <t t-set="title">Welcome to Auction Management System</t>
            <div class="container-fluid hero-section">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <h1 class="display-4">Discover Auctions</h1>
                        <p class="lead">Participate in live property auctions from the comfort of your home.</p>
                        <a href="/auction/register" class="btn btn-primary btn-lg">Get Started</a>
                    </div>
                    <div class="col-md-6">
                        <!-- Hero Image Placeholder -->
                    </div>
                </div>
            </div>
        </header>

        <!-- Featured Auctions Section -->
        <div class="container py-5">
            <h2 class="text-center mb-4">Featured Auctions</h2>
            <div class="row">
                <t t-foreach="featured_auctions" t-as="auction">
                    <div class="col-md-4 mb-4">
                        <div class="card property-card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><t t-esc="auction.auction_name"/></h5>
                                <p class="card-text">
                                    <strong>Property:</strong> <t t-esc="auction.auction_property.name"/><br/>
                                    <strong>Initial Price:</strong> <t t-esc="auction.initial_price"/><br/>
                                    <strong>Start Date:</strong> <t t-esc="auction.start_date"/><br/>
                                    <!-- Placeholder for countdown -->
                                    <!-- <strong>Countdown:</strong> <span id="auction-countdown"></span><br/>

                                    <script>
                                        // Parse the auction start date into JavaScript Date object
                                        let auctionStartDate = new Date('<t t-esc="auction.start_date"/>'); 

                                        // Function to calculate and update the countdown
                                        function updateCountdown() {
                                            let now = new Date();
                                            let diff = auctionStartDate - now;


                                                let days = Math.floor(diff / (1000 * 60 * 60 * 24));
                                                let hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                let minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                                                let seconds = Math.floor((diff % (1000 * 60)) / 1000);

                                                // Format the time as days:hours:minutes:seconds
                                                let timeString = `${days}d:${String(hours).padStart(2, '0')}h:${String(minutes).padStart(2, '0')}m:${String(seconds).padStart(2, '0')}s`;
                                                document.getElementById('auction-countdown').innerHTML = timeString;

                                        }

                                        // Update the countdown every second
                                        let timerInterval = setInterval(updateCountdown, 1000);
                                    </script> -->
                                    <strong>End Date:</strong> <t t-esc="auction.end_date"/>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </div>

        <!-- How It Works Section -->
        <div class="container-fluid bg-light py-5 mt-5">
            <div class="container">
                <h2 class="text-center mb-4">How It Works</h2>
                <div class="row text-center">
                    <div class="col-md-4">
                        <i class="fas fa-user-plus fa-3x mb-3 text-primary"></i>
                        <h4>Register</h4>
                        <p>Create your account to start bidding on auctions.</p>
                    </div>
                    <div class="col-md-4">
                        <i class="fas fa-search fa-3x mb-3 text-primary"></i>
                        <h4>Browse</h4>
                        <p>Explore a wide range of properties available for auction.</p>
                    </div>
                    <div class="col-md-4">
                        <i class="fas fa-gavel fa-3x mb-3 text-primary"></i>
                        <h4>Bid</h4>
                        <p>Place your bids and compete with other participants.</p>
                    </div>
                </div>
            </div>
        </div>



    </template>
</odoo>
